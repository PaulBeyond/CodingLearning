# BOOK_1_C与指针

## CHAPTER_1_上手

​	空白、注释、制表符 -> 提升代码可读性，便于后续修改

​	若有一份声明需要运用到不同的源文件中，可以include第一个头文件，而后在需要用到的源文件中声明一份拷贝，而用不着在许多不同的地方进行复制，避免维护时出现错误。

​	宏定义：字符串常量；函数原型的声明；main函数。

​	C语言中不存在string类型，字符串终止符为NUL，且终止符不看作是字符串的一部分，字符串常量就是用双引号括起来的一串字符。

​	格式化字符输出：%d %o %x ： 二进制、八进制、十六进制。

## CHAPTER_2_基本概念

翻译环境：源代码被转化成为可执行的机器指令；

执行环境：实际执行代码；

两种环境不必位于同一台机器上，例如交叉编译器；

独立环境是指不存在操作系统的环境，一般在嵌入式系统中遇到该类环境

### 翻译过程：

1. 预处理器处理：该阶段预处理器在源代码上执行一些文本操作，例如以实际值代替宏定义指令符号，读入include指令中包含的文件内容
2. 解析阶段：判断语句的意思，该阶段是产生绝大多数error和warning信息的地方，而后产生目标代码。目标代码是机器指令的初步形式，用于实现程序的语言。同时，在该阶段若存在需要进行优化的选项，优化器会对目标代码进一步进行处理，提高效率。

### 执行过程

1. 程序必须载入到内存中；
2. 程序执行开始，通常一个小型的启动程序与程序链接在一起，而后调用main函数；
3. 开始执行程序代码，运行堆栈stack以存储函数的局部变量和返回地址，同时程序也可以使用静态内存，存储于静态内存中的变量在程序的整个执行过程中将一直保留它们的值。
4. 程序终止。

### 词法规则

注释不能嵌套，编译时会被预处理器拿掉，取而代之的是一个空格。

### 代码风格

1. 空行用于分割不同的逻辑代码块，按功能分段；
2. 绝大多数操作符的使用，中间都隔以空格，以增强可读性；
3. 嵌套于其他语句的语句使用缩进，以显示他们之间的层次；
4. 注释成块出现

### 数据

1. 整型：有符号、无符号，长整型
2. ......
3. 指针：
   1. 指针常量
   2. 字符串常量

typedef：为各种数据类型定义新的名字

const：申明常量不能修改

1. 指向整型常量的指针：可以修改指针的值，但不能修改所指向的值
2. 指向整型的常量指针：指针是常量，但可以修改所指向的整型的值

```C++
int const * pci; // 1. 指向整型常量的指针
int * const cpi; // 2. 指向整型的常量指针
int const * const cpci; // 指针和指向都是常量，不能更改
```

const和define相比，define更好，因为只要允许使用字面值常量的地方都可使用define，而const常量只能用于允许使用变量的地方。

```C++
#define MAX_ELEMENTS 50
int const max_elements = 50;
```

4. 在代码块之外声明的变量总是存储于静态内存中的，不属于堆栈内存，称为静态变量；
5. 代码块内部声明的变量存储于堆栈中，如果加上关键词static，则可以使他的存储类型从auto变为static，具有静态存储类型的变量在整个程序执行过程中一直存在

## 语句

空语句：本身只包含一个分号；

表达式语句：

常用语句与C++相同

### 操作符和表达式

移位操作符：简单地把一个值的位向左或者向右移动

1. 在左移位中，值最左边的几位被丢弃，右边多出来的几个空位由0补齐
2. 右移位操作
   1. 逻辑移位，左边移入的位用0填充
   2. 算术移位：左边移入的位由原先该值的符号决定，即符号位为1则移入位均为1；
3. 移位操作需要为整型，对于有符号值，采取逻辑移位还是算术移位取决于编译器

位操作符对它们的操作数各个位执行AND、OR和XOR等逻辑操作（&、|、^）；

关系操作符的返回值是整型，符合则为1，否则为0；（C语言中）

条件操作符：exp1 ? exp2 : exp3

逗号操作符，整个逗号表达式的值就是最后那个表达式的值

左值就是能够出现在赋值符号左边的东西，右值就是那些可以出现在赋值符号右边的东西：

1. 左值可以充当右值，右值不一定可以充当左值

表达式求值：

1. 隐式类型转化
2. 算术转换

操作符的属性：优先级、结合性、执行顺序；

### 指针

字节：每个字节包含8个位，可以存储无符号值(0~255)或有符号值(-128~127)

字：为了存储更大的值，通常把两个或者更多个字节合在一起作为一个更大的内存单元，许多机器以字为单元存储整数，每个字一般包含2个或者4个字节。

关心的主要问题：

1. 内存中每个位置由一个独一无二的地址标识
2. 内存中的每个位置都包含一个值

值的类型并非值本身所固有的一种特性，而是取决于它使用的方式。

指针自身的值为一个地址值，而需要使用间接访问操作符来获取其所指向的值

NULL指针：表示不指向任何东西，亦可对指针变量赋零值实现

```c++
*&a = 25;
```

指针的指针：*操作符具有从右向左的结合性

指针表达式